<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Istio 1.8: A Smart DNS Proxy Takes Support for Virtual Machines a Step Further · BIS</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="WorkloadGroup is a new API object. It is intended to be used with non-Kubernetes workloads like Virtual Machines and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies."><meta name=author content="BIS"><meta name=generator content="Hugo 0.101.0"><link rel=stylesheet href=/sdmxio/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=/sdmxio/plugins/slick/slick.css><link rel=stylesheet href=/sdmxio/plugins/animate/animate.css><link rel=stylesheet href=/sdmxio/plugins/venobox/venobox.css><link rel=stylesheet href=/sdmxio/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=/sdmxio/plugins/hightlight/syntax.css><link rel=stylesheet href=/sdmxio/plugins/fontawesome/font-awesome.min.css><link rel=stylesheet href=/sdmxio/plugins/tocbot/tocbot.css><link rel=stylesheet href=/sdmxio/plugins/bigger-picture/bigger-picture.css><link rel=stylesheet href=/sdmxio/scss/style.css media=screen><link rel=icon href=/sdmxio/favicon.png type=image/png><link rel=apple-touch-icon href=/sdmxio/apple-touch-icon.png><link rel=apple-touch-icon sizes=57x57 href=images/favicon-57.png><link rel=apple-touch-icon sizes=72x72 href=images/favicon-72.png><link rel=apple-touch-icon sizes=114x114 href=images/favicon-114.png><link rel=apple-touch-icon sizes=144x144 href=images/favicon-144.png><link href=/opensearchdescription.xml rel=search title='Content search' type=application/opensearchdescription+xml><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="jimmysong.io"><meta name=twitter:creator content="@jimmysongio"><meta property="og:url" content="https://glennmdt.github.io/sdmxio/blog/istio-1-8-a-smart-dns-proxy-takes-support-for-virtual-machines-a-step-further/"><meta property="og:title" content="Istio 1.8: A Smart DNS Proxy Takes Support for Virtual Machines a Step Further"><meta property="twitter:title" content="Istio 1.8: A Smart DNS Proxy Takes Support for Virtual Machines a Step Further"><meta property="og:description" content="WorkloadGroup is a new API object. It is intended to be used with non-Kubernetes workloads like Virtual Machines and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies."><meta property="twitter:description" content="WorkloadGroup is a new API object. It is intended to be used with non-Kubernetes workloads like Virtual Machines and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies."><meta property="og:image" content="https://glennmdt.github.io/sdmxio/images/banner/istio18.jpg"><meta property="twitter:image" content="https://glennmdt.github.io/sdmxio/images/banner/istio18.jpg"></head><body><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden=true></i></button><header class="fixed-top header"><div class="navigation w-100"><div class=container><nav class="navbar navbar-expand-lg navbar-light p-0"><a class=navbar-brand href=/sdmxio><img class=img-fluid width=200px src=/sdmxio/images/logo.png alt="Open source software for official statistics"></a>
<button class="navbar-toggler rounded-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu><a class=dropdown-item href=/sdmxio/about>ABOUT SDMX.IO</a>
<a class=dropdown-item href=/sdmxio/members>SDMX.IO MEMBERS</a></div></li><li class=nav-item><a class=nav-link href=/sdmxio/blog>Blog</a></li><li class=nav-item><a class=nav-link href=https://lib.jimmysong.io target=_blank rel=noopener>Book</a></li><li class=nav-item><a class=nav-link href=https://lib.jimmysong.io/event/ target=_blank rel=noopener>Event</a></li><li class=nav-item><a class=nav-link href=/sdmxio/notice>Notice</a></li><li class=nav-item><a class=nav-link href=/sdmxio/tags>Tags</a></li><li class=nav-item><a class=nav-link href=/sdmxio/contact>Contact</a></li></ul></div></nav></div></div></header><section class="bg-cover page-title-section overlay" style=background-image:url(/sdmxio/images/backgrounds/page-title.jpg),url(/sdmxio/images/backgrounds/page-title.webp)><div class=container><div class=row><div class=col-md-8><ul class="list-inline custom-breadcrumb"><li class="list-inline-item h2"><a class="text-white font-secondary" href=/sdmxio/blog>Blogs</a></li><li class=list-inline-item><i class="ti-angle-right text-white"></i></li><li class="list-inline-item text-white h3 font-secondary">Istio 1.8: A Smart DNS Proxy Takes Support for Virtual Machines a Step Further</li></ul><p class=text-white>WorkloadGroup is a new API object. It is intended to be used with non-Kubernetes workloads like Virtual Machines and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies.</p></div></div></div></section><section class=section-sm><div class="container blog"><div class=row><div class="col-lg-8 article-content"><div class=row><div class=col-12><ul class=list-inline><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Date
:</span>November 19, 2020</li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Category
:</span><a href=/sdmxio/categories/istio>
Istio</a></li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Word Count
:</span>638 words</li><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Reading Time
:</span>3 Minute</li></ul></div><div class="col-12 my-4"><div class=border-bottom></div></div><div class="col-12 content"><p>1.8 is the last version of Istio to be released in 2020 and it has the following major updates:</p><ul><li>Supports installation and upgrades using Helm 3.</li><li>Mixer was officially removed.</li><li>Added Istio DNS proxy to transparently intercept DNS queries from applications.</li><li>WorkloadGroup has been added to simplify the integration of virtual machines.</li></ul><p>WorkloadGroup is a new API object. It is intended to be used with non-Kubernetes workloads like Virtual Machines and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies.</p><h2 id=installation-and-upgrades>Installation and Upgrades</h2><p>Istio starts to officially support the use of <a href=https://istio.io/latest/docs/setup/install/helm/ title=Helm target=_blank rel=noopener>Helm</a>
v3 for installations and upgrades. In previous versions, the installation was done with the istioctl command-line tool or Operator. With version 1.8, Istio supports in-place and canary upgrades with Helm.</p><h2 id=enhancing-istios-usability>Enhancing Istio’s Usability</h2><p>The istioctl command-line tool has a new bug reporting feature (<a href=https://istio.io/latest/docs/reference/commands/istioctl/#istioctl-bug-report title="istioctl bug-report" target=_blank rel=noopener>istioctl bug-report</a>
), which can be used to collect debugging information and get cluster status.</p><p>The way to install the <a href=https://istio.io/latest/blog/2020/addon-rework/ title=add-on target=_blank rel=noopener>add-on</a>
has changed: 1.7 istioctl is no longer recommended and has been removed in 1.8, to help solve the problem of add-on lagging upstream and to make it easier to maintain.</p><p>Tetrate is an enterprise service mesh company. Our flagship product, TSB, enables customers to bridge their workloads across bare metal, VMs, K8s, & cloud at the application layer and provide a resilient, feature-rich service mesh fabric powered by Istio, Envoy, and Apache SkyWalking.</p><p>Mixer, the Istio component that had been responsible for policy controls and telemetry collection, has been removed. Its functionalities are now being served by the Envoy proxies. For extensibility, service mesh experts recommend using <a href=https://istio.io/latest/blog/2020/wasm-announce/ title=WebAssembly target=_blank rel=noopener>WebAssembly</a>
(Wasm) to extend Envoy; and you can also try the <a href=https://www.getenvoy.io/reference/getenvoy_extension_toolkit_reference/ title="GetEnvoy Toolkit" target=_blank rel=noopener>GetEnvoy Toolkit</a>
, which makes it easier for developers to create Wasm extensions for Envoy. If you still want to use Mixer, you must use version 1.7 or older. Mixer continued receiving bug fixes and security fixes until Istio 1.7. Many features supported by Mixer have alternatives as specified in the <a href=https://tinyurl.com/mixer-deprecation title="Mixer Deprecation" target=_blank rel=noopener>Mixer Deprecation</a>
document, including the <a href=https://github.com/istio/proxy/tree/master/extensions title="in-proxy extensions" target=_blank rel=noopener>in-proxy extensions</a>
based on the Wasm sandbox API.</p><h2 id=support-for-virtual-machines>Support for Virtual Machines</h2><p>Istio’s recent upgrades have steadily focused on making virtual machines first-class citizens in the mesh. <a href=https://thenewstack.io/how-to-integrate-virtual-machines-into-istio-service-mesh/ title="Istio 1.7 made progress to support virtual machines" target=_blank rel=noopener>Istio 1.7 made progress to support virtual machines</a>
and Istio 1.8 adds a <a href=https://istio.io/latest/blog/2020/dns-proxy/ title="smart DNS proxy" target=_blank rel=noopener>smart DNS proxy</a>
, which is an Istio sidecar agent written in Go. The Istio agent on the sidecar will come with a cache that is dynamically programmed by Istiod DNS Proxy. DNS queries from applications are transparently intercepted and served by an Istio proxy in a pod or VM that intelligently responds to DNS query requests, enabling seamless multicluster access from virtual machines to the service mesh.</p><p>Istio 1.8 adds a <a href=https://istio.io/latest/docs/reference/config/networking/workload-group/ title=WorkloadGroup target=_blank rel=noopener>WorkloadGroup</a>
, which describes a collection of workload instances. It provides a specification that the workload instances can use to bootstrap their proxies, including the metadata and identity. It is only intended to be used with non-k8s workloads like Virtual Machines, and is meant to mimic the existing sidecar injection and deployment specification model used for Kubernetes workloads to bootstrap Istio proxies. Using WorkloadGroups, Istio has started to help automate VM registration with <a href=https://istio.io/latest/docs/setup/install/virtual-machine/#create-files-to-transfer-to-the-virtual-machine title="istioctl experimental workload group" target=_blank rel=noopener>istioctl experimental workload group</a>
.</p><p><a href=https://www.tetrate.io/ title=Tetrate target=_blank rel=noopener>Tetrate</a>
, the enterprise service mesh company, uses these <a href=https://www.tetrate.io/blog/whats-new-in-istio-1-8-dns-proxy-helps-expand-mesh-to-vms-and-multicluster/ title="VM features" target=_blank rel=noopener>VM features</a>
extensively in customers’ multicluster deployments, to enable sidecars to resolve DNS for hosts exposed at ingress gateways of all the clusters in a mesh; and to access them over mutual TLS.</p><h2 id=conclusion>Conclusion</h2><p>All in all, the Istio team has kept the promise made at the beginning of the year to maintain a regular release cadence of one release every three months since the 1.1 release in 2018, with continuous optimizations in performance and user experience for a seamless experience of brownfield and greenfield apps on Istio. We look forward to more progress from Istio in 2021.</p></div><div class="col-12 mb-4"><div class=border-bottom><p class=edit-page><a href=https://github.com/sdmxio/website/edit/master/content/en/blog/istio-1-8-a-smart-dns-proxy-takes-support-for-virtual-machines-a-step-further/index.md><i class="fa fa-pencil-square-o" aria-hidden=true></i> Edit this page</a></p></div></div><div class=col-12><li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"></li></div><div class=col-12><ul class="pager blog-pager"><li class=previous><a href=https://glennmdt.github.io/sdmxio/blog/how-to-integrate-virtual-machines-into-istio-service-mesh/ data-toggle=tooltip data-placement=top title="How to Integrate Virtual Machines into Istio Service Mesh">&larr; Previous Post</a></li><li class=next><a href=https://glennmdt.github.io/sdmxio/blog/what-is-a-service-mesh/ data-toggle=tooltip data-placement=top title="What is a service mesh?">Next Post &rarr;</a></li></ul></div><div class=col-12></div></div></div><aside class="col-lg-4 sidebar"><div class="bg-white mb-4"><p class=sidebar-title>Categories</p><ul class=list-unstyled><li class=border-bottom><a href=/sdmxio/categories/cloud-native class="d-block pb-3 mt-3 text-capitalize">Cloud native</a></li><li class=border-bottom><a href=/sdmxio/categories/istio class="d-block pb-3 mt-3 text-capitalize">Istio</a></li><li class=border-bottom><a href=/sdmxio/categories/open-source class="d-block pb-3 mt-3 text-capitalize">Open source</a></li><li class=border-bottom><a href=/sdmxio/categories/private class="d-block pb-3 mt-3 text-capitalize">Private</a></li><li class=border-bottom><a href=/sdmxio/categories/service-mesh class="d-block pb-3 mt-3 text-capitalize">Service mesh</a></li></ul></div><div class=bg-white><p class=sidebar-title>Tags</p><div id=tag-cloud><a href=/tags/abac style=font-size:.8rem>Abac</a>
<a href=/tags/aeraki style=font-size:.8rem>Aeraki</a>
<a href=/tags/api-gateway style=font-size:.8rem>API gateway</a>
<a href=/tags/cloud-native style=font-size:1.2330185680574361rem>Cloud native</a>
<a href=/tags/cncf style=font-size:.8rem>Cncf</a>
<a href=/tags/envoy style=font-size:1.0732042984363437rem>Envoy</a>
<a href=/tags/iptables style=font-size:1.2330185680574361rem>Iptables</a>
<a href=/tags/istio style=font-size:1.9807693330560248rem>Istio</a>
<a href=/tags/kuberentes style=font-size:1.0732042984363437rem>Kuberentes</a>
<a href=/tags/kubernetes style=font-size:1.346408596872687rem>Kubernetes</a>
<a href=/tags/multicluster style=font-size:.8rem>Multicluster</a>
<a href=/tags/ngac style=font-size:.8rem>Ngac</a>
<a href=/tags/nocalhost style=font-size:.8rem>Nocalhost</a>
<a href=/tags/rbac style=font-size:.8rem>Rbac</a>
<a href=/tags/service-mesh style=font-size:1.7451315883583074rem>Service mesh</a>
<a href=/tags/sidecar style=font-size:1.2330185680574361rem>Sidecar</a>
<a href=/tags/slime style=font-size:.8rem>Slime</a>
<a href=/tags/spiffe style=font-size:.8rem>Spiffe</a>
<a href=/tags/spire style=font-size:.8rem>Spire</a>
<a href=/tags/telepresence style=font-size:.8rem>Telepresence</a>
<a href=/tags/tsb style=font-size:.8rem>Tsb</a></div></div><div class="bg-white py-4 box-shadow mb-4 sticky-top aside-toc d-none d-sm-block"><p class=sidebar-title>Table of content</p><nav id=TableOfContents><ul><li><a href=#installation-and-upgrades>Installation and Upgrades</a></li><li><a href=#enhancing-istios-usability>Enhancing Istio’s Usability</a></li><li><a href=#support-for-virtual-machines>Support for Virtual Machines</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></aside></div></div></section><footer><div class="footer bg-footer section-sm border-bottom"><div class=container><div class=row><div class="col-lg-4 col-sm-8 mb-5 mb-lg-0"><h4 class="text-white mb-5 text-uppercase">Follow Me</h4><ul class=list-unstyled><li class="mb-4 text-color">Twitter</li></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0"><h4 class="text-white mb-5 text-uppercase">Blog</h4><ul class=list-unstyled><li class=mb-3><a class=text-color href=/sdmxio/blog/why-istio-need-spire/>Why would you need SPIRE for authentication with Istio?</a></li><li class=mb-3><a class=text-color href=/sdmxio/blog/istio-service-mesh-book/>In-Depth Understanding of Istio: Announcing the Publication of a New Istio Book</a></li><li class=mb-3><a class=text-color href=/sdmxio/blog/how-to-build-istio/>How to build Istio?</a></li></ul></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0"><h4 class="text-white mb-5 text-uppercase">links</h4><ul class=list-unstyled><li class=mb-3><a class=text-color href=/sdmxio/awesome-cloud-native/ target=_blank rel=noopener>Awesome Cloud Native</a></li><li class=mb-3><a class=text-color href=https://cloudnative.to target=_blank rel=noopener>Cloud Native Community(China)</a></li><li class=mb-3><a class=text-color href=https://www.youtube.com/channel/UCwLGlxo3b492bzIgD8lnOKg/ target=_blank rel=noopener>Jimmy's YouTube Channel</a></li><li class=mb-3><a class=text-color href=https://tetrate.io/?jimmysong target=_blank rel=noopener>Tetrate - Service Mesh Company</a></li><li class=mb-3><a class=text-color href=https://istio.tetratelabs.io/ target=_blank rel=noopener>Tetrate Istio Distro</a></li></ul></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0"><h4 class="text-white mb-5 text-uppercase">Books</h4><ul class=list-unstyled><li class=mb-3><a class=text-color href=https://lib.jimmysong.io/cloud-native/ target=_blank rel=noopener>Cloud Native Bible</a></li><li class=mb-3><a class=text-color href=https://lib.jimmysong.io/envoy-handbook/ target=_blank rel=noopener>Envoy Handbook</a></li><li class=mb-3><a class=text-color href=https://lib.jimmysong.io/istio-handbook/ target=_blank rel=noopener>Istio Handbook</a></li><li class=mb-3><a class=text-color href=https://lib.jimmysong.io/kubernetes-handbook/ target=_blank rel=noopener>Kubernetes Handbook</a></li></ul></div><div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0"><h4 class="text-white mb-5 text-uppercase">new notice</h4><ul class=list-unstyled><li class=mb-3><a class=text-color href=/sdmxio/notice/cloud-native-public-library/>Cloud Native library launch</a></li><li class=mb-3><a class=text-color href=/sdmxio/notice/tetrate-recruit/>The Enterprise Service Mesh company Tetrate is hiring</a></li><li class=mb-3><a class=text-color href=/sdmxio/notice/tetrate-istio-fundamental-courses/>Tetrate Academy Releases Free Istio Fundamentals Course</a></li></ul></div></div></div></div><div class="copyright py-4 bg-footer"><div class=container><div class=row><div class="col-sm-9 text-sm-left text-center"><p class="mb-0 text-color">© 2022 BIS All Rights Reserved</p></div><div class="col-sm-3 text-sm-right text-center"><ul class=list-inline><li class=list-inline-item><a class="d-inline-block p-2" href=https://twitter.com/jimmysongio target=_blank rel=noopener><i class="fa fa-twitter"></i></a></li><li class=list-inline-item><a class="d-inline-block p-2" href=https://github.com/sdmxio target=_blank rel=noopener><i class="fa fa-github"></i></a></li><li class=list-inline-item><a class="d-inline-block p-2" href=https://linkedin.com/in/sdmxio target=_blank rel=noopener><i class="fa fa-linkedin"></i></a></li><li class=list-inline-item><a class="d-inline-block p-2" href=mailto:info@sdmxio.io target=_blank rel=noopener><i class="fa fa-envelope"></i></a></li></ul></div></div></div></div></footer><script src=/sdmxio/plugins/jQuery/jquery.min.js></script>
<script src=/sdmxio/plugins/bootstrap/bootstrap.min.js></script>
<script src=/sdmxio/plugins/slick/slick.min.js></script>
<script src=/sdmxio/plugins/venobox/venobox.min.js></script>
<script src=/sdmxio/plugins/filterizr/jquery.filterizr.min.js></script>
<script src=/sdmxio/plugins/search/fuse.min.js></script>
<script src=/sdmxio/plugins/search/mark.js></script>
<script src=/sdmxio/plugins/search/search.js></script>
<script src=/sdmxio/plugins/hex_md5/hex_md5.js></script>
<script src=/sdmxio/plugins/anchor/anchor.min.js></script>
<script src=/sdmxio/plugins/tocbot/tocbot.min.js></script>
<script src=/sdmxio/plugins/bigger-picture/bigger-picture.min.js></script>
<script src=/sdmxio/js/script.min.js></script><meta name=baidu-site-verification content="g8IYR9SNLF"><script src=https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.js></script>
<script>docsearch({apiKey:"d7f7189aef2be4e5be6a6b9f44897f61",indexName:"DocSearch",appId:"CRNDR5CNMU",inputSelector:"#js-algolia-btn",debug:!1})</script><script>tocbot.init({tocSelector:"#TableOfContents",contentSelector:".content",headingSelector:"h1, h2, h3, h4",hasInnerContainers:!1,collapseDepth:3})</script></body></html>